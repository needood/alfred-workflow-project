{"version":3,"sources":["../../src/lib/generate.ts"],"names":["fs","require","buildGraphBuildFun","index","decision","file","bodyString","filesLength","relativePath","buildTocBodyFun","generateToc","options","path","Config","getSavePath","graphGenerate","GenerateBuilder","header","tocHeader","results","setStart","setEnd","setBody","build","output","console","log","generateGraph","generate","type","toc","writeFileSync","message"],"mappings":";;;;;;;;;AAEA;;AACA;;AACA;;AAJA,IAAIA,EAAE,GAAGC,OAAO,MAAhB;;AAMA,SAASC,kBAAT,CAA6BC,KAA7B,EAAoCC,QAApC,EAA8CC,IAA9C,EAAoDC,UAApD,EAAgEC,WAAhE,EAAuF;AACrFD,EAAAA,UAAU,CAACH,KAAD,CAAV,GAAoB,UAAUA,KAAV,GAAkB,WAAlB,GAAgCA,KAAhC,GAAwC,GAAxC,GAA8CC,QAA9C,GAAyD,UAAzD,GAAsEC,IAAI,CAACG,YAA3E,GAA0F,IAA9G;;AACA,MAAIL,KAAK,KAAK,CAAd,EAAiB;AACfG,IAAAA,UAAU,CAACC,WAAW,GAAGJ,KAAf,CAAV,GAAkC,WAAWA,KAAK,GAAG,CAAnB,IAAwB,OAAxB,GAAkCA,KAAlC,GAA0C,oBAA5E;AACD;;AACD,SAAOG,UAAP;AACD;;AAED,SAASG,eAAT,CAA0BN,KAA1B,EAAiCC,QAAjC,EAA2CC,IAA3C,EAAiDC,UAAjD,EAAuE;AACrEA,EAAAA,UAAU,CAACH,KAAD,CAAV,GAAoB,UAAUA,KAAV,GAAkB,IAAlB,GAAyBC,QAAzB,GAAoC,IAApC,GAA2CC,IAAI,CAACG,YAAhD,GAA+D,GAAnF;AACA,SAAOF,UAAP;AACD;;AAED,SAASI,WAAT,CAAsBC,OAAtB,EAAmD;AACjD,MAAIC,IAAI,GAAGC,gBAAOC,WAAP,EAAX;;AACA,MAAIC,aAAa,GAAG,IAAIC,gCAAJ,CAAoBJ,IAApB,CAApB;AACA,MAAIK,MAAM,GAAG,OAAO,qBAAUC,SAAjB,GAA6B,IAA1C;AACA,MAAIC,OAAO,GAAGJ,aAAa,CACxBK,QADW,CACFH,MADE,EAEXI,MAFW,CAEJ,EAFI,EAGXC,OAHW,CAGHb,eAHG,EAIXc,KAJW,EAAd;;AAMA,MAAIZ,OAAO,IAAIA,OAAO,CAACa,MAAvB,EAA+B;AAC7BC,IAAAA,OAAO,CAACC,GAAR,CAAYP,OAAZ;AACD;;AACD,SAAOA,OAAP;AACD;;AAED,SAASQ,aAAT,GAA0B;AACxB,MAAIf,IAAI,GAAGC,gBAAOC,WAAP,EAAX;;AACA,MAAIC,aAAa,GAAG,IAAIC,gCAAJ,CAAoBJ,IAApB,CAApB;AACA,MAAIK,MAAM,GAAG,sCAAb;AACA,MAAIE,OAAO,GAAGJ,aAAa,CACxBK,QADW,CACFH,MADE,EAEXI,MAFW,CAEJ,OAFI,EAGXC,OAHW,CAGHpB,kBAHG,EAIXqB,KAJW,EAAd;AAMAE,EAAAA,OAAO,CAACC,GAAR,CAAYP,OAAZ;AACA,SAAOA,OAAP;AACD;;AAEM,SAASS,QAAT,CAAmBC,IAAnB,EAAyBlB,OAAzB,EAAsD;AAC3D,MAAIkB,IAAI,KAAK,KAAb,EAAoB;AAClB,QAAIC,GAAG,GAAGpB,WAAW,CAACC,OAAD,CAArB;AACAX,IAAAA,EAAE,CAAC+B,aAAH,CAAiBlB,gBAAOC,WAAP,KAAuB,WAAxC,EAAqDgB,GAArD;AACA,WAAOA,GAAP;AACD;;AACD,MAAID,IAAI,KAAK,OAAb,EAAsB;AACpB,WAAOF,aAAa,EAApB;AACD;;AAED,MAAIK,OAAO,GAAG,oBAAoBH,IAApB,GAA2B,wBAAzC;AACAJ,EAAAA,OAAO,CAACC,GAAR,CAAYM,OAAZ;AACA,SAAOA,OAAP;AACD","sourcesContent":["let fs = require('fs')\n\nimport { GenerateBuilder } from './base/GenerateBuilder'\nimport Config from './Config'\nimport { getI18n } from './helpers/i18n'\n\nfunction buildGraphBuildFun (index, decision, file, bodyString, filesLength): string[] {\n  bodyString[index] = '\\n  _' + index + ' [label=\"' + index + '.' + decision + '\"; URL=\"' + file.relativePath + '\"]'\n  if (index !== 1) {\n    bodyString[filesLength + index] = '\\n  _' + (index - 1) + ' -> _' + index + ' [style=\"dotted\"];'\n  }\n  return bodyString\n}\n\nfunction buildTocBodyFun (index, decision, file, bodyString): string[] {\n  bodyString[index] = '\\n* [' + index + '. ' + decision + '](' + file.relativePath + ')'\n  return bodyString\n}\n\nfunction generateToc (options?: {output: boolean}) {\n  let path = Config.getSavePath()\n  let graphGenerate = new GenerateBuilder(path)\n  let header = '# ' + getI18n().tocHeader + '\\n'\n  let results = graphGenerate\n    .setStart(header)\n    .setEnd('')\n    .setBody(buildTocBodyFun)\n    .build()\n\n  if (options && options.output) {\n    console.log(results)\n  }\n  return results\n}\n\nfunction generateGraph () {\n  let path = Config.getSavePath()\n  let graphGenerate = new GenerateBuilder(path)\n  let header = 'digraph {\\n  node [shape=plaintext];'\n  let results = graphGenerate\n    .setStart(header)\n    .setEnd('\\n}\\n')\n    .setBody(buildGraphBuildFun)\n    .build()\n\n  console.log(results)\n  return results\n}\n\nexport function generate (type, options?: {output: boolean}) {\n  if (type === 'toc') {\n    let toc = generateToc(options)\n    fs.writeFileSync(Config.getSavePath() + 'README.md', toc)\n    return toc\n  }\n  if (type === 'graph') {\n    return generateGraph()\n  }\n\n  let message = '\\n error: type ' + type + ' current not supported'\n  console.log(message)\n  return message\n}\n"],"file":"generate.js"}